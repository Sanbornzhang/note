# 缓存
## Redis or Memcache
### Memcache
1. 可以使用多核,单实例吞吐较高.
2. 只迟滞简单的`K/V`结构
3. 无法进行持久化
4. 数据不能备份 重启后全部丢失
### Redis
1. 支持多种数据结构
2. 单线程
3. 支持持久化操作[aof|rdb],但是还是有30s-60s数据丢失风险

## 缓存和数据库操作顺序
* 读: 先读缓存,缓存没有命中,在读取数据库内容,最后`Set`回缓存
* 写: 先操作缓存,再更新数据库.缓存使用`Delete`
## 缓存击穿
缓存击穿是指: 高并发下面多个线程同时访问过期的key
### 如何避免
1. 使用互斥锁
2. 提前使用互斥锁
3. 体检更新缓存